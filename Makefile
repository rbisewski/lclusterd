#
# Makefile for lclusterd
#

# 
# phony targets
#
.PHONY: all client regen_proto clean 

#
# make targets
#

all: regen_proto lclusterd client 

regen_proto:
	@echo "Regenerating lclusterpb protobuffs..."
	@protoc -I lclusterpb/ lclusterpb/lclusterpb.proto --go_out=plugins=grpc:lclusterpb

lclusterd:
	@echo "Building lclusterd..."
	@go build

client:
	@echo "Building lcluster client..."
	@go build -o lclusterc ./client

clean:
	@echo "Cleaning binaries..."
	@go clean
	@rm -f lclusterc
	@echo "Removing possible configs generated by clients..."
	@echo "Removing generated protobuff code..."
	@rm -f lclusterpb/lclusterpb.pb.go
